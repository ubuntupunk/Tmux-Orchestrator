# Tmux Orchestrator - Developer Guide

## Project Overview

The Tmux Orchestrator is an AI-powered session management system where Claude acts as the orchestrator for multiple Claude agents across tmux sessions, managing codebases and keeping development moving forward 24/7.

### Key Capabilities
- **Self-trigger** - Agents schedule their own check-ins and continue work autonomously
- **Coordinate** - Project managers assign tasks to engineers across multiple codebases  
- **Persist** - Work continues even when you close your laptop
- **Scale** - Run multiple teams working on different projects simultaneously

### Architecture
Three-tier hierarchy to overcome context window limitations:
```
┌─────────────┐
│ Orchestrator│ ← You interact here
└──────┬──────┘
       │ Monitors & coordinates
       ▼
┌─────────────┐     ┌─────────────┐
│  Project    │     │  Project    │
│  Manager    │     │  Manager    │
└──────┬──────┘     └──────┬──────┘
       │                   │
       ▼                   ▼
┌─────────────┐     ┌─────────────┐
│ Developer/  │     │ Developer/  │
│ QA/DevOps   │     │ QA/DevOps   │
└─────────────┘     └─────────────┘
```

## Technology Stack

### Core Technologies
- **Language**: Python 3 (tmux_utils.py), Bash scripting
- **Session Management**: Tmux for persistent sessions
- **AI Integration**: Claude agents with role-based hierarchy
- **Process Management**: Background scheduling with nohup

### Key Files and Scripts
- `tmux_utils.py` - Core Python utilities for tmux session management
- `send-claude-message.sh` - Send messages to Claude agents in tmux windows
- `schedule_with_note.sh` - Dynamic scheduler with notes for check-ins
- `CLAUDE.md` - Comprehensive project knowledge base and agent guidelines
- `LEARNINGS.md` - Accumulated insights and best practices

## Agent System Architecture

### Agent Types
1. **Orchestrator** - High-level oversight and coordination (you)
2. **Project Manager** - Quality-focused team coordination
3. **Developer** - Implementation and technical decisions
4. **QA Engineer** - Testing and verification
5. **DevOps** - Infrastructure and deployment
6. **Code Reviewer** - Security and best practices
7. **Researcher** - Technology evaluation
8. **Documentation Writer** - Technical documentation

### Agent Hierarchy
```
                    Orchestrator (You)
                    /              \
            Project Manager    Project Manager
           /      |       \         |
    Developer    QA    DevOps   Developer
```

## Development Best Practices

### Git Discipline - MANDATORY FOR ALL AGENTS
- **Auto-Commit Every 30 Minutes**: `git add -A && git commit -m "Progress: [description]"`
- **Commit Before Task Switches**: Never leave uncommitted changes
- **Feature Branch Workflow**: `git checkout -b feature/[descriptive-name]`
- **Meaningful Commit Messages**: Avoid "fixes", "updates", "changes"
- **Tag Working Versions**: `git tag stable-[feature]-$(date +%Y%m%d-%H%M%S)`

### Communication Patterns
- **Effective**: "STOP. Give me status: 1) X fixed? YES/NO 2) Current error?"
- **Less Effective**: "How's the authentication coming along?"
- **Key**: Specific, numbered questions force clear responses

### Problem-Solving Guidelines
- **Web Research**: ALWAYS suggest web research after 10 minutes of failed attempts
- **Error Analysis**: Read error messages carefully before implementing solutions
- **Time Limits**: Set time limits on debugging attempts (max 3 approaches)
- **Documentation First**: Enforce documentation BEFORE continuing when stuck

### Window Naming Convention
- Use descriptive names that indicate purpose
- Include project context when managing multiple projects
- Examples: `project-frontend`, `project-backend`, `project-logs`

## Core Scripts Usage

### send-claude-message.sh
```bash
# Send message to Claude agent in specific tmux window
./send-claude-message.sh <session:window> "<message>"

# Example
./send-claude-message.sh agentic-seek:3 "Hello Claude!"
```

### schedule_with_note.sh
```bash
# Schedule check-in with custom note
./schedule_with_note.sh <minutes> "<note>" [target_window]

# Example
./schedule_with_note.sh 15 "Check build status and verify tests"
```

### tmux_utils.py
```python
# Get comprehensive tmux status
python3 tmux_utils.py

# Key classes:
# - TmuxOrchestrator: Main orchestration class
# - TmuxSession: Session data structure
# - TmuxWindow: Window data structure
```

## Project Manager Commands

### Claude Commands Integration
- Use `.claude/commands/pm-oversight.md` for project management templates
- Parse arguments to identify projects and spec files
- Format: `/project:pm-oversight <projects> SPEC: <spec_file_path>`

### PM Best Practices
- **Be Firm but Constructive**: Insist on documentation when needed
- **Status Reports**: Use direct questions for better results
- **Escalation Timing**: If 3 approaches fail, suggest different strategy
- **Cross-Window Intelligence**: Monitor server logs while developers work
- **Proactive Monitoring**: Check multiple windows to spot issues early

## Monitoring and Status

### Status Monitoring
- Use `tmux_utils.py` for comprehensive session status
- Monitor `next_check_note.txt` for scheduled check-ins
- Check server logs and related windows for context

### Quality Assurance
- PMs must be "meticulous about testing and verification"
- Use verification checklists, no shortcuts
- Track technical debt
- Trust but verify - always check actual implementation

## Common Pitfalls to Avoid

1. **Not Using Available Tools**: Web search, documentation, community resources
2. **Circular Problem Solving**: Trying same approach repeatedly without stepping back
3. **Missing Context**: Not checking other tmux windows for error details
4. **Poor Time Management**: Not setting time limits on debugging attempts
5. **Incomplete Handoffs**: Not documenting solutions for future agents
6. **Over-Engineering**: Implementing complex solutions without checking basic assumptions

## Claude Plan Mode

### Activation
- **Key Sequence**: Hold Shift, press Tab, press Tab again, release Shift
- **Tmux Implementation**: `tmux send-keys -t session:window S-Tab S-Tab`
- **Verification**: `tmux capture-pane | grep "plan mode on"`
- **Critical**: MUST verify "⏸ plan mode on" appears - may need multiple attempts

### Usage
- Activate plan mode for complex implementations
- Forces thoughtful approach before coding begins
- Always verify activation before sending planning request

## File Structure

```
.
├── README.md                    # Project overview and capabilities
├── CLAUDE.md                    # Comprehensive knowledge base (MIGRATED CONTENT)
├── LEARNINGS.md                 # Accumulated insights and patterns (MIGRATED CONTENT)
├── tmux_utils.py               # Core Python utilities for tmux management
├── send-claude-message.sh      # Message sending script
├── schedule_with_note.sh       # Dynamic scheduler with notes
├── next_check_note.txt         # Current scheduled check-in note
├── Orchestrator.png            # Architecture diagram
├── .claude/
│   └── commands/
│       └── pm-oversight.md     # Project manager command template
└── Examples/                   # Visual examples and screenshots
    ├── Initiate Project Manager.png
    ├── Project Completed.png
    ├── Reading TMUX Windows and Sending Messages.png
    └── Status reports.png
```

## Orchestrator-Specific Guidelines

### Stay High-Level
- Don't get pulled into implementation details
- Focus on coordination and oversight
- Use pattern recognition across projects

### Cross-Project Knowledge
- Apply insights from one project to help another
- Recognize similar issues (auth, env vars, etc.)
- Maintain institutional knowledge

### Effective Interventions
- Send timely positive feedback when errors are resolved
- Provide specific reminders about documentation
- Monitor real-time progress across multiple windows

## Emergency Procedures

### When Agents Get Stuck
1. Check exact error messages first
2. Suggest web research after 10 minutes
3. Enforce documentation of attempts
4. Switch strategies after 3 failed approaches
5. Escalate to different agent type if needed

### Session Recovery
- Use `tmux_utils.py` to assess current state
- Check `next_check_note.txt` for context
- Review `LEARNINGS.md` for similar past issues
- Restart agents with proper context handoff

## Success Metrics

- **Autonomous Operation**: Agents work without constant human intervention
- **Quality Delivery**: Features implemented correctly with proper testing
- **Knowledge Retention**: Insights captured in LEARNINGS.md
- **Cross-Project Learning**: Patterns applied across different codebases
- **Persistent Progress**: Work continues across sessions and time

---

*"The tools we build today will program themselves tomorrow"* - Alan Kay, 1971

## Migrated Content Notice

This .agent.md file incorporates content from:
- **CLAUDE.md**: Complete project knowledge base with agent guidelines, git discipline, communication patterns, and technical procedures
- **LEARNINGS.md**: Accumulated insights, best practices, problem-solving patterns, and real-world lessons learned from project management and agent coordination

All essential information from these files has been integrated into the appropriate sections above for comprehensive developer guidance.